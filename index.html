<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Crachá CETEP</title>
    <!-- Bootstrap & FontAwesome -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Fonts & Pica.js -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/pica@9.0.1/dist/pica.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-light-blue">

    <!-- Container Principal que vira Flexbox no Desktop -->
    <div class="container-xl app-container pt-3">
        
        <!-- Cabeçalho (Fixo no topo) -->
        <header class="text-center text-white mb-3 flex-shrink-0">
            <h4 class="fw-bold mb-0"><i class="fa-solid fa-id-card me-2"></i>Gerador de Crachá CETEP</h4>
            <p class="x-small opacity-75 mb-0">Versão Otimizada Desktop</p>
        </header>

        <!-- Área de Conteúdo (Expande para preencher a tela) -->
        <div class="row g-3 app-content">
            
            <!-- COLUNA ESQUERDA: UPLOADS -->
            <div class="col-lg-3 h-100-desktop">
                <div class="card shadow-sm border-0 scrollable-card">
                    <div class="card-header bg-white border-0 pt-3 pb-0 flex-shrink-0">
                        <h6 class="fw-bold text-primary mb-0"><i class="fa-solid fa-folder-open me-2"></i>Arquivos</h6>
                    </div>
                    
                    <!-- Corpo com Scroll Interno se necessário -->
                    <div class="card-body p-3 scrollable-body">
                        
                        <!-- Seção Modelo -->
                        <div class="mb-4">
                            <label class="form-label fw-bold text-dark mb-1 x-small">
                                <i class="fa-regular fa-file-image me-1 text-primary"></i> Modelo (PNG)
                            </label>
                            <div class="alert alert-light border p-2 mb-2 x-small text-muted lh-sm">
                                Modelo padrão carregado. Use PNG transparente para personalizar.
                            </div>
                            <input class="form-control form-control-sm" type="file" id="uploadModel" accept="image/png">
                        </div>

                        <hr class="border-secondary opacity-10">

                        <!-- Seção Foto -->
                        <div class="mb-2">
                            <label class="form-label fw-bold text-dark mb-1 x-small">
                                <i class="fa-solid fa-camera me-1 text-primary"></i> Foto
                            </label>
                            <div class="alert alert-light border p-2 mb-2 x-small text-muted lh-sm">
                                Use uma foto clara e bem iluminada.
                            </div>
                            <input class="form-control form-control-sm" type="file" id="uploadImage" accept="image/*">
                            <div class="form-text x-small mt-1">JPG, PNG, WebP</div>
                        </div>

                    </div>
                </div>
            </div>

<!-- COLUNA CENTRAL: PREVIEW (Canvas Centralizado) -->
<div class="col-lg-6 h-100-desktop">
    <div class="card shadow border-0 bg-white h-100">
        <div class="card-body p-3 canvas-center-col">
            
            <!-- Canvas -->
            <div class="canvas-wrapper mb-3">
                <canvas id="canvas" class="img-fluid rounded shadow-sm border" aria-label="Preview"></canvas>
            </div>

            <!-- Controles Centrais -->
            <div class="w-100" style="max-width: 450px;"> <!-- Aumentei um pouco a largura max -->
                
                <!-- Zoom -->
                <div class="d-flex align-items-center gap-2 mb-3 bg-light px-3 py-1 rounded-pill border justify-content-center">
                    <label class="x-small fw-bold text-muted mb-0"><i class="fa-solid fa-magnifying-glass"></i></label>
                    <button id="zoomOut" class="btn btn-sm btn-link text-decoration-none text-secondary p-0"><i class="fa-solid fa-minus"></i></button>
                    <input type="range" class="form-range mx-1" id="zoom" min="20" max="200" value="100">
                    <button id="zoomIn" class="btn btn-sm btn-link text-decoration-none text-secondary p-0"><i class="fa-solid fa-plus"></i></button>
                    <span id="zoomValue" class="badge bg-secondary x-small">100%</span>
                </div>

                <!-- Botões de Ação (Layout Unificado) -->
                <div class="d-flex gap-2 justify-content-center align-items-center w-100">
                    
                    <!-- Botão Gerar -->
                    <button id="generateCard" class="btn btn-primary btn-sm px-3 fw-bold shadow-sm">
                        <i class="fa-solid fa-wand-magic-sparkles me-1"></i> Gerar
                    </button>
                    
                    <!-- Botão Baixar (Aparece no meio) -->
                    <a id="downloadLink" href="#" class="btn btn-success btn-sm px-3 fw-bold shadow-sm" style="display: none;">
                        <i class="fa-solid fa-download me-1"></i> Baixar
                    </a>

                    <!-- Botão Imprimir -->
                    <button id="printCard" class="btn btn-outline-secondary btn-sm px-3 fw-bold shadow-sm" title="Imprimir">
                        <i class="fa-solid fa-print"></i>
                    </button>
                </div>
                
            </div>

        </div>
    </div>
</div>

            <!-- COLUNA DIREITA: CONTROLES (Scrollável) -->
            <div class="col-lg-3 h-100-desktop">
                <div class="card shadow-sm border-0 scrollable-card">
                    <div class="card-header bg-white border-0 pt-3 pb-0 flex-shrink-0">
                        <h6 class="fw-bold text-primary mb-0"><i class="fa-solid fa-sliders me-2"></i>Edição</h6>
                    </div>
                    
                    <div class="card-body p-3 scrollable-body">
                        
                        <!-- Bloco 1: Ajustes Imagem -->
                        <div class="bg-light rounded p-2 mb-3 border">
                            <label class="x-small fw-bold text-uppercase text-muted mb-2 d-block">Imagem</label>
                            
                            <!-- Brilho/Contraste -->
                            <div class="row g-2 mb-2">
                                <div class="col-6">
                                    <label class="x-small mb-0">Brilho</label>
                                    <input type="range" class="form-range form-range-sm" id="brightness" min="-50" max="50" value="0">
                                </div>
                                <div class="col-6">
                                    <label class="x-small mb-0">Contraste</label>
                                    <input type="range" class="form-range form-range-sm" id="contrast" min="-50" max="50" value="0">
                                </div>
                            </div>
                            <!-- Posição -->
                            <div class="row g-2">
                                <div class="col-6">
                                    <label class="x-small mb-0">Pos. X</label>
                                    <input type="range" class="form-range form-range-sm" id="positionX" min="-100" max="100" value="0">
                                </div>
                                <div class="col-6">
                                    <label class="x-small mb-0">Pos. Y</label>
                                    <input type="range" class="form-range form-range-sm" id="positionY" min="-100" max="100" value="0">
                                </div>
                            </div>
                            <!-- Displays ocultos -->
                            <span id="brightnessValue" class="d-none">0</span>
                            <span id="contrastValue" class="d-none">0</span>
                            <span id="positionXValue" class="d-none">0</span>
                            <span id="positionYValue" class="d-none">0</span>
                        </div>

                        <!-- Bloco 2: Dados -->
                        <div>
                            <label class="x-small fw-bold text-uppercase text-muted mb-2 d-block">Dados</label>

                            <!-- Nome -->
                            <div class="mb-2">
                                <label class="x-small fw-bold text-dark mb-0">Nome</label>
                                <input type="text" id="name" class="form-control form-control-sm" placeholder="Nome completo">
                                <div class="d-flex align-items-center mt-1">
                                    <input type="range" class="form-range form-range-sm flex-grow-1 me-2" id="nameSize" min="12" max="24" value="18">
                                    <span id="nameSizeValue" class="badge bg-white text-dark border x-small">18px</span>
                                </div>
                            </div>

                            <!-- Curso -->
                            <div class="mb-2">
                                <label class="x-small fw-bold text-dark mb-0">Curso</label>
                                <select id="courseSelect" class="form-select form-select-sm"></select>
                                <input type="text" id="courseCustom" class="form-control form-control-sm mt-1" placeholder="Digite..." style="display: none;">
                                <div class="d-flex align-items-center mt-1">
                                    <input type="range" class="form-range form-range-sm flex-grow-1 me-2" id="courseSize" min="10" max="18" value="14">
                                    <span id="courseSizeValue" class="badge bg-white text-dark border x-small">14px</span>
                                </div>
                            </div>

                            <!-- Local -->
                            <div class="mb-0">
                                <label class="x-small fw-bold text-dark mb-0">Local</label>
                                <select id="locationSelect" class="form-select form-select-sm"></select>
                                <input type="text" id="locationCustom" class="form-control form-control-sm mt-1" placeholder="Digite..." style="display: none;">
                                <div class="d-flex align-items-center mt-1">
                                    <input type="range" class="form-range form-range-sm flex-grow-1 me-2" id="locationSize" min="12" max="20" value="16">
                                    <span id="locationSizeValue" class="badge bg-white text-dark border x-small">16px</span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div> 
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
